# 半透明物体渲染

#### 0.算法总结

低级算法

- 深度缓存
- 油画家算法

高级算法

- 加权平均算法
- 深度剥离 - Depth Peeling

#### 1.传统方法

- 从远到近blend【油画家算法】 => 【产生问题】涉及对半透明物体**排序**、**物体交叉**
- 延迟渲染不支持，结合前向渲染管线单独渲染半透明物体

#### 2.排序 & 交叉问题

解决思路

- 思路1：将交叉的物体**切开**，保证不会重叠
- 思路2：OIT

#### 3.OIT - order independent transparency

顺序无关的半透明渲染

- 方法1：**加权平均算法**，是一种近似估计，认为渲染的结果**与渲染顺序无关**，用颜色的(加权)平均值作为替代，比如用不透明度作为加权值
  - => 作证：假设不透明物体的颜色都一致，那么渲染的结果与渲染顺序无关
  - => 渲染相关物体，修改blend方式，设置累积缓冲和权重缓冲，最后相除再通过一次后处理实现
- 方法2：**深度剥离算法**，多次渲染，每次渲染能得到离我们最近的一层点(深度值)，下次渲染时就不考虑这一层及其之前的点，有点像剥洋葱一样，一层一层剥离

TODO：未完待续～

-----

相关优质博客：

- OIT算法：https://zhuanlan.zhihu.com/p/430980851
- 知乎某博主研究毛发渲染：https://zhuanlan.zhihu.com/p/123023614